"use strict";(self.webpackChunkeservices=self.webpackChunkeservices||[]).push([[87],{9087:(G,y,m)=>{m.r(y),m.d(y,{BusinesspermitbyidModule:()=>F});var Z=m(6895),d=m(4629),u=m(5861),v=m(7579),n=m(433),g=m(5439),e=m(4650),q=m(3388),_=m(8423),h=m(1730);function U(a,l){1&a&&(e.TgZ(0,"div",36)(1,"h4",37),e._uU(2,"2. Other Information"),e.qZA()())}function N(a,l){1&a&&(e.TgZ(0,"div",38)(1,"div",78)(2,"h6")(3,"span",44)(4,"strong"),e._uU(5,"*"),e.qZA()(),e._uU(6," Business Address : "),e.qZA(),e._UZ(7,"input",89),e.qZA(),e.TgZ(8,"div",73)(9,"h6")(10,"span",44)(11,"strong"),e._uU(12,"*"),e.qZA()(),e._uU(13,"Business Postal Code : "),e.qZA(),e._UZ(14,"input",90),e.qZA(),e.TgZ(15,"div",73)(16,"h6")(17,"span",44)(18,"strong"),e._uU(19,"*"),e.qZA()(),e._uU(20,"Business Email Address : "),e.qZA(),e._UZ(21,"input",91),e.qZA(),e.TgZ(22,"div",73)(23,"h6")(24,"span",44)(25,"strong"),e._uU(26,"*"),e.qZA()(),e._uU(27,"Business Telephone No : "),e.qZA(),e._UZ(28,"input",92),e.qZA(),e.TgZ(29,"div",73)(30,"h6")(31,"span",44)(32,"strong"),e._uU(33,"*"),e.qZA()(),e._uU(34,"Business Mobile No : "),e.qZA(),e._UZ(35,"input",93),e.qZA(),e.TgZ(36,"div",78)(37,"h6")(38,"span",44)(39,"strong"),e._uU(40,"*"),e.qZA()(),e._uU(41," Owners Address : "),e.qZA(),e._UZ(42,"input",94),e.qZA(),e.TgZ(43,"div",73)(44,"h6")(45,"span",44)(46,"strong"),e._uU(47,"*"),e.qZA()(),e._uU(48,"Owners Postal Code : "),e.qZA(),e._UZ(49,"input",95),e.qZA(),e.TgZ(50,"div",73)(51,"h6")(52,"span",44)(53,"strong"),e._uU(54,"*"),e.qZA()(),e._uU(55,"Owners Email Address : "),e.qZA(),e._UZ(56,"input",96),e.qZA(),e.TgZ(57,"div",73)(58,"h6")(59,"span",44)(60,"strong"),e._uU(61,"*"),e.qZA()(),e._uU(62,"Owners Telephone No : "),e.qZA(),e._UZ(63,"input",97),e.qZA(),e.TgZ(64,"div",73)(65,"h6")(66,"span",44)(67,"strong"),e._uU(68,"*"),e.qZA()(),e._uU(69,"Owners Mobile No : "),e.qZA(),e._UZ(70,"input",98),e.qZA(),e.TgZ(71,"div",78)(72,"h6")(73,"span",44)(74,"strong"),e._uU(75,"*"),e.qZA()(),e._uU(76," In case of emergency, provide name and contact person: "),e.qZA(),e._UZ(77,"input",99),e.qZA(),e.TgZ(78,"div",73)(79,"h6")(80,"span",44)(81,"strong"),e._uU(82,"*"),e.qZA()(),e._uU(83," Telephone / Mobile No : "),e.qZA(),e._UZ(84,"input",100),e.qZA(),e.TgZ(85,"div",73)(86,"h6")(87,"span",44)(88,"strong"),e._uU(89,"*"),e.qZA()(),e._uU(90,"Email Address : "),e.qZA(),e._UZ(91,"input",101),e.qZA(),e.TgZ(92,"div",73)(93,"h6")(94,"span",44)(95,"strong"),e._uU(96,"*"),e.qZA()(),e._uU(97," Business Area (in sq m) : "),e.qZA(),e._UZ(98,"input",102),e.qZA(),e.TgZ(99,"div",73)(100,"h6")(101,"span",44)(102,"strong"),e._uU(103,"*"),e.qZA()(),e._uU(104," Gross/Sales Receipts : "),e.qZA(),e._UZ(105,"input",103),e.qZA(),e.TgZ(106,"div",36)(107,"h6",67),e._uU(108,"Total No. of Employees in Establishment"),e.qZA()(),e.TgZ(109,"div",104)(110,"h6")(111,"span",44)(112,"strong"),e._uU(113,"*"),e.qZA()(),e._uU(114," Male : "),e.qZA(),e._UZ(115,"input",105),e.qZA(),e.TgZ(116,"div",104)(117,"h6")(118,"span",44)(119,"strong"),e._uU(120,"*"),e.qZA()(),e._uU(121," Female : "),e.qZA(),e._UZ(122,"input",106),e.qZA(),e.TgZ(123,"div",36)(124,"h6",67),e._uU(125,"No. of Employees Residing within LGU"),e.qZA()(),e.TgZ(126,"div",104),e._UZ(127,"input",107),e.qZA(),e.TgZ(128,"div",36)(129,"h6",67),e._uU(130,"Note: Fill up only if Business Place is Rented"),e.qZA()(),e.TgZ(131,"div",73)(132,"h6")(133,"span",44)(134,"strong"),e._uU(135,"*"),e.qZA()(),e._uU(136," Lessor's Full Name : "),e.qZA(),e._UZ(137,"input",108),e.qZA(),e.TgZ(138,"div",73)(139,"h6")(140,"span",44)(141,"strong"),e._uU(142,"*"),e.qZA()(),e._uU(143," Lessor's Address : "),e.qZA(),e._UZ(144,"input",109),e.qZA(),e.TgZ(145,"div",73)(146,"h6")(147,"span",44)(148,"strong"),e._uU(149,"*"),e.qZA()(),e._uU(150," Lessor's Tel/Mobile No. : "),e.qZA(),e._UZ(151,"input",110),e.qZA(),e.TgZ(152,"div",73)(153,"h6")(154,"span",44)(155,"strong"),e._uU(156,"*"),e.qZA()(),e._uU(157," Lessor's Email Address : "),e.qZA(),e._UZ(158,"input",111),e.qZA(),e.TgZ(159,"div",73)(160,"h6")(161,"span",44)(162,"strong"),e._uU(163,"*"),e.qZA()(),e._uU(164," Monthly Rental : "),e.qZA(),e._UZ(165,"input",112),e.qZA()())}function T(a,l){if(1&a&&(e.TgZ(0,"div",38)(1,"div",113)(2,"h6")(3,"span",114),e._UZ(4,"strong"),e.qZA(),e.TgZ(5,"span",44),e._uU(6,"*"),e.qZA(),e._uU(7," Line of Business : "),e.qZA(),e._UZ(8,"input",115),e.qZA(),e.TgZ(9,"div",113)(10,"h6")(11,"span",114),e._UZ(12,"strong"),e.qZA(),e.TgZ(13,"span",44),e._uU(14,"*"),e.qZA(),e._uU(15," No of Units : "),e.qZA(),e._UZ(16,"input",115),e.qZA(),e.TgZ(17,"div",113)(18,"h6")(19,"span",114),e._UZ(20,"strong"),e.qZA(),e.TgZ(21,"span",44),e._uU(22,"*"),e.qZA(),e._uU(23," Capitalization "),e._UZ(24,"br"),e._uU(25,"(for New Business) : "),e.qZA(),e._UZ(26,"input",115),e.qZA(),e.TgZ(27,"div",113)(28,"h6")(29,"span",114),e._UZ(30,"strong"),e.qZA(),e.TgZ(31,"span",44),e._uU(32,"*"),e.qZA(),e._uU(33," Essential : "),e.qZA(),e._UZ(34,"input",115),e.qZA(),e.TgZ(35,"div",113)(36,"h6")(37,"span",114),e._UZ(38,"strong"),e.qZA(),e.TgZ(39,"span",44),e._uU(40,"*"),e.qZA(),e._uU(41," Non-Essential : "),e.qZA(),e._UZ(42,"input",115),e.qZA()()),2&a){const t=l.$implicit;e.xp6(8),e.s9C("value",t.LineOfBusiness),e.xp6(8),e.s9C("value",t.NoOfUnits),e.xp6(10),e.s9C("value",t.Capitalization),e.xp6(8),e.s9C("value",t.Essential),e.xp6(8),e.s9C("value",t.NonEssential)}}function x(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",116)(1,"button",117),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.printoutNewTab())}),e._uU(2," Print "),e.qZA()()}}function B(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",118)(1,"button",119),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showReschedAppointmentModal())}),e._uU(2," Appointment "),e.qZA()()}}function P(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",116)(1,"button",117),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showApproveModal())}),e._uU(2," Approve "),e.qZA()()}}function w(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",118)(1,"button",120),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showRejectModal())}),e._uU(2," Reject "),e.qZA()()}}const I=[{path:"",component:(()=>{class a{constructor(t,s,i,o,r,p){this.actRoute=t,this.authService=s,this.formBuilder=i,this.spinner=o,this.alertService=r,this.router=p,this.disabledAll=!0,this.lineofbusiness=[],this.status="",this.applicantFullname="",this.realtime=new v.x,this.remarks="",this.applicantEmail="",this.userId="",this.closeResult="",this.AppointmentSchedule="",this.dateAppointment="",this.DateApproved="",this.businesspermitId=this.actRoute.snapshot.paramMap.get("id"),this.createNewBusinessPermitFormGroup=this.formBuilder.group({type:[""],modeofpayment:["",[n.kI.required]],dateofapplication:["",[n.kI.required]],tinno:["",[n.kI.required,n.kI.pattern(/^\d{3}-{3}-{3}-{3}$|^\d\d\d-\d\d\d-\d\d\d-\d\d\d$/)]],dtiseccdaregistrationnumber:["",[n.kI.required]],dtiseccdaregistrationdate:["",[n.kI.required]],typeofbusiness:["",[n.kI.required]],taxincentivegovernmententity:["",[n.kI.required]],specifytheentity:["",[n.kI.required]],taxpayerlastname:["",[n.kI.required,n.kI.pattern(/^[a-zA-Z ]+$/)]],taxpayerfirstname:["",[n.kI.required,n.kI.pattern(/^[a-zA-Z ]+$/)]],taxpayermiddlename:["",[n.kI.required,n.kI.pattern(/^[a-zA-Z ]+$/)]],taxpayerbusinessname:["",[n.kI.required,n.kI.pattern(/^[a-zA-Z ]+$/),n.kI.minLength(4)]],tradenamefranchise:["",[n.kI.required,n.kI.pattern(/^[a-zA-Z ]+$/),n.kI.minLength(4)]],lineofbusiness:["",[n.kI.required]],numberofunits:["",[n.kI.required]],capitalization:["",[n.kI.required]],essential:["",[n.kI.required]],nonessential:["",[n.kI.required]],lineofbusiness2:[""],numberofunits2:[""],capitalization2:[""],essential2:[""],nonessential2:[""],lineofbusiness3:[""],numberofunits3:[""],capitalization3:[""],essential3:[""],nonessential3:[""],lineofbusiness4:[""],numberofunits4:[""],capitalization4:[""],essential4:[""],nonessential4:[""],lineofbusiness5:[""],numberofunits5:[""],capitalization5:[""],essential5:[""],nonessential5:[""],iagreecheckbox:[!1,[n.kI.requiredTrue]],signatureofapplicant:["",[n.kI.required]],from:[""],to:[""],businessaddress:["",[n.kI.required,n.kI.minLength(4)]],businesspostalcode:["",[n.kI.required,n.kI.minLength(4)]],businessemailaddress:["",[n.kI.required,n.kI.email]],businesstelephone:["",[n.kI.required]],businessmobile:["",[n.kI.required]],ownersaddress:["",[n.kI.required,n.kI.minLength(4)]],ownerspostalcode:["",[n.kI.required,n.kI.minLength(4)]],ownersemailaddress:["",[n.kI.required,n.kI.email]],ownerstelephone:["",[n.kI.required]],ownersmobile:["",[n.kI.required]],incaseofemergencyperson:["",[n.kI.required,n.kI.pattern(/^[a-zA-Z ]+$/)]],incaseofemergencypersontelephonenumber:["",[n.kI.required]],incaseofemergencypersonemail:["",[n.kI.required,n.kI.email]],incaseofemergencypersonbusinessarea:["",[n.kI.required]],grossreceipt:["",[n.kI.required]],totalnumberofmale:["",[n.kI.required]],totalnumberoffemale:["",[n.kI.required]],numberofemployeeslgu:["",[n.kI.required]],lessorsfullname:[""],lessorsaddress:[""],lessorstelorphone:[""],lessorsemail:[""],monthlyrental:[""]})}ngOnInit(){this.getBusinessPermit(),setInterval(()=>{this.getBusinessPermit()},5e3),this.formModal=new window.bootstrap.Modal(document.getElementById("exampleModal")),this.formModalApproved=new window.bootstrap.Modal(document.getElementById("approvedApplication")),this.rescheduleAppointment=new window.bootstrap.Modal(document.getElementById("rescheduleAppointmentApplication"))}getBusinessPermit(){var t=this;return(0,u.Z)(function*(){var s={id:t.businesspermitId};yield t.authService.getBusinessPermitById(s).subscribe(i=>{console.log("business permitid",i.data[0]);var o=i.data[0];t.DateApproved=o.DateApproved,t.createNewBusinessPermitFormGroup.controls.type.setValue(o.Type),t.createNewBusinessPermitFormGroup.controls.signatureofapplicant.setValue(o.ApplicantSignature),t.userid=i.data[0].UserId,t.status=o.Status,t.getuserById(t.userid),t.getBasicInformation(o.BusinessPermitId),t.getAmendment(o.BusinessPermitId),t.otherInformation(o.BusinessPermitId),t.lineOfBusiness(o.BusinessPermitId),t.AppointmentSchedule=o.AppointmentSchedule,console.log("appointmentschedule",t.AppointmentSchedule)})})()}getuserById(t){var s=this;return(0,u.Z)(function*(){var i={id:t};yield s.authService.getUsersById(i).subscribe(o=>{s.applicantEmail=o.data[0].email,s.userId=s.applicantFullname=`${o.data[0].firstname} ${o.data[0].middlename} ${o.data[0].lastname}`})})()}getBasicInformation(t){var s=this;return(0,u.Z)(function*(){var i={id:t};yield s.authService.getBasicInformationByBusinessPermitId(i).subscribe(o=>{var r=o.data[0];s.createNewBusinessPermitFormGroup.controls.modeofpayment.setValue(r.ModeOfPayment),s.createNewBusinessPermitFormGroup.controls.dateofapplication.setValue(r.DateOfApplication),s.createNewBusinessPermitFormGroup.controls.tinno.setValue(r.TinNo),s.createNewBusinessPermitFormGroup.controls.dtiseccdaregistrationnumber.setValue(r.DtiSecCdaRegistrationNumber),s.createNewBusinessPermitFormGroup.controls.dtiseccdaregistrationdate.setValue(r.DtiSecCdaRegistrationDate),s.createNewBusinessPermitFormGroup.controls.typeofbusiness.setValue(r.TypeOfBusiness),s.createNewBusinessPermitFormGroup.controls.taxincentivegovernmententity.setValue(r.TaxIncentiveGovernmentEntity),s.createNewBusinessPermitFormGroup.controls.specifytheentity.setValue(r.SpecifyEntity),s.createNewBusinessPermitFormGroup.controls.taxpayerlastname.setValue(r.TaxPayerLastName),s.createNewBusinessPermitFormGroup.controls.taxpayerfirstname.setValue(r.TaxPayerFirstName),s.createNewBusinessPermitFormGroup.controls.taxpayermiddlename.setValue(r.TaxPayerMiddleName),s.createNewBusinessPermitFormGroup.controls.taxpayerbusinessname.setValue(r.TaxPayerBusinessName),s.createNewBusinessPermitFormGroup.controls.tradenamefranchise.setValue(r.TradeNameFranchise)})})()}getAmendment(t){var s=this;return(0,u.Z)(function*(){var i={id:t};yield s.authService.getAmendmentByBusinessPermitId(i).subscribe(o=>{var r=o.data[0];s.createNewBusinessPermitFormGroup.controls.from.setValue(r.Mula),s.createNewBusinessPermitFormGroup.controls.to.setValue(r.Hanggang)})})()}otherInformation(t){var s=this;return(0,u.Z)(function*(){var i={id:t};yield s.authService.getotherInformationByBusinessPermitId(i).subscribe(o=>{var r=o.data[0];console.log("otherInformation",r),s.createNewBusinessPermitFormGroup.controls.businessaddress.setValue(r.BusinessAddress),s.createNewBusinessPermitFormGroup.controls.businesspostalcode.setValue(r.BusinessPostalCode),s.createNewBusinessPermitFormGroup.controls.businessemailaddress.setValue(r.BusinessEmailAddress),s.createNewBusinessPermitFormGroup.controls.businesstelephone.setValue(r.BusinessTelephoneNumber),s.createNewBusinessPermitFormGroup.controls.businessmobile.setValue(r.BusinessMobileNumber),s.createNewBusinessPermitFormGroup.controls.ownersaddress.setValue(r.OwnersAddress),s.createNewBusinessPermitFormGroup.controls.ownerspostalcode.setValue(r.OwnersPostalCode),s.createNewBusinessPermitFormGroup.controls.ownersemailaddress.setValue(r.OwnersEmailAddress),s.createNewBusinessPermitFormGroup.controls.ownerstelephone.setValue(r.OwnersTelephoneNumber),s.createNewBusinessPermitFormGroup.controls.ownersmobile.setValue(r.OwnersMobileNumber),s.createNewBusinessPermitFormGroup.controls.incaseofemergencyperson.setValue(r.IncaseOfEmergencyContactPerson),s.createNewBusinessPermitFormGroup.controls.incaseofemergencypersontelephonenumber.setValue(r.IncaseOfEmergencyPhoneorMobileNumber),s.createNewBusinessPermitFormGroup.controls.incaseofemergencypersonemail.setValue(r.IncaseOfEmergencyEmailAddress),s.createNewBusinessPermitFormGroup.controls.incaseofemergencypersonbusinessarea.setValue(r.BusinessAreaInSqm),s.createNewBusinessPermitFormGroup.controls.grossreceipt.setValue(r.GrossSalesReceipts),s.createNewBusinessPermitFormGroup.controls.totalnumberofmale.setValue(r.TotalNoOfEmployeesMale),s.createNewBusinessPermitFormGroup.controls.totalnumberoffemale.setValue(r.TotalNoOfEmployeesFemale),s.createNewBusinessPermitFormGroup.controls.numberofemployeeslgu.setValue(r.NumberOfEmployeesResidingLGU),s.createNewBusinessPermitFormGroup.controls.lessorsfullname.setValue(r.LessorsFullname),s.createNewBusinessPermitFormGroup.controls.lessorsaddress.setValue(r.LessorsAddress),s.createNewBusinessPermitFormGroup.controls.lessorstelorphone.setValue(r.LessorsTelephoneMobileNumber),s.createNewBusinessPermitFormGroup.controls.lessorsemail.setValue(r.LessorsEmailAddress),s.createNewBusinessPermitFormGroup.controls.monthlyrental.setValue(r.LessorsMonthlyRental)})})()}lineOfBusiness(t){var s=this;return(0,u.Z)(function*(){var i={id:t};yield s.authService.getLineofBusinessByBusinessPermitId(i).subscribe(o=>{s.lineofbusiness=o.data})})()}rejectBusinessPermit(){var t=this;return(0,u.Z)(function*(){if(""==t.remarks||null==t.remarks||null==t.remarks)alert("Remarks shouldn't be empty");else{t.spinner.show().then(()=>{});var s={businesspermitid:t.businesspermitId,status:"Rejected"};yield t.authService.updateBusinessPermitStatus(s).subscribe(function(){var i=(0,u.Z)(function*(o){if(1==o.success){let r={to:t.applicantEmail,subject:"Your business permit application has been rejected",text:t.remarks,html:`${t.remarks}\n            <br>\n            <h5>Type :</h5> <p>${t.createNewBusinessPermitFormGroup.controls.type.value}</p>\n            <br>\n            <h5>Taxpayer/Registrant Fullname :</h5> <p>${t.createNewBusinessPermitFormGroup.controls.taxpayerfirstname.value} ${t.createNewBusinessPermitFormGroup.controls.taxpayermiddlename.value} ${t.createNewBusinessPermitFormGroup.controls.taxpayerlastname.value}</p>\n            <br>\n            <h5>Business Name :</h5> <p>${t.createNewBusinessPermitFormGroup.controls.taxpayerbusinessname.value}</p>\n            <br>\n            <h5>Trade Name / Franchise :</h5> <p>${t.createNewBusinessPermitFormGroup.controls.tradenamefranchise.value}</p>`};yield t.authService.sendGridEmail(r).subscribe(p=>{1==p.success||(t.alertService.success(p.message),t.spinner.hide())}),setTimeout(()=>{t.spinner.hide(),t.alertService.success("Business permit rejected successfully!"),t.realtime.next(t.getBusinessPermit()),t.formModal.hide()},1e3)}else t.alertService.danger(o.message)});return function(o){return i.apply(this,arguments)}}())}})()}approveBusinessPermit(){var t=this;return(0,u.Z)(function*(){var s=g(t.dateAppointment).format("LL"),i=g(t.dateAppointment).format("YYYY-MM-DD"),o=g(new Date).format("YYYY-MM-DD");if(""==t.dateAppointment||null==t.dateAppointment||null==t.dateAppointment)alert("Date shouldn't be empty");else{t.spinner.show().then(()=>{});var r={businesspermitid:t.businesspermitId,status:"Approved",appointmentschedule:i,dateapproved:o};yield t.authService.updateBusinessPermitStatus(r).subscribe(function(){var p=(0,u.Z)(function*(c){if(1==c.success){let f={to:t.applicantEmail,subject:"Your business permit application has been approved",text:`Please come to city hall on ${s} for some required informations, Thank you!`,html:`Please come to city hall on ${s} for some required informations, Thank you!\n            <br>\n            <h5>Type :</h5> <p>${t.createNewBusinessPermitFormGroup.controls.type.value}</p>\n            <br>\n            <h5>Taxpayer/Registrant Fullname :</h5> <p>${t.createNewBusinessPermitFormGroup.controls.taxpayerfirstname.value} ${t.createNewBusinessPermitFormGroup.controls.taxpayermiddlename.value} ${t.createNewBusinessPermitFormGroup.controls.taxpayerlastname.value}</p>\n            <br>\n            <h5>Business Name :</h5> <p>${t.createNewBusinessPermitFormGroup.controls.taxpayerbusinessname.value}</p>\n            <br>\n            <h5>Trade Name / Franchise :</h5> <p>${t.createNewBusinessPermitFormGroup.controls.tradenamefranchise.value}</p>`};yield t.authService.sendGridEmail(f).subscribe(function(){var E=(0,u.Z)(function*(b){if(1==b.success){var k={id:t.userid};yield t.authService.updateUsersBusinessPermitlength(k).subscribe(A=>{0==A.success&&alert(A.message)})}else t.alertService.success(b.message),t.spinner.hide()});return function(b){return E.apply(this,arguments)}}()),setTimeout(()=>{t.spinner.hide(),t.alertService.success("Business permit approved successfully!"),t.realtime.next(t.getBusinessPermit()),t.formModalApproved.hide()},1e3)}else t.alertService.danger(c.message)});return function(c){return p.apply(this,arguments)}}())}})()}showRejectModal(){var t=this;return(0,u.Z)(function*(){yield t.formModal.show()})()}showApproveModal(){var t=this;return(0,u.Z)(function*(){yield t.formModalApproved.show()})()}showReschedAppointmentModal(){var t=this;return(0,u.Z)(function*(){yield t.rescheduleAppointment.show()})()}editScheduleAppointment(){var t=this;return(0,u.Z)(function*(){if(""==t.AppointmentSchedule||null==t.AppointmentSchedule||null==t.AppointmentSchedule)alert("Date shouldn't be empty");else{var s=g(t.AppointmentSchedule).format("YYYY-MM-DD");t.spinner.show().then(()=>{}),t.authService.updateBusinessPermitAppointmentSchedule({businesspermitid:t.businesspermitId,appointmentschedule:s}).subscribe(function(){var o=(0,u.Z)(function*(r){if(1==r.success){let p={to:t.applicantEmail,subject:"Your approved business permit application has been rescheduled",text:`Please come to city hall on ${s} for some required informations, Thank you!`,html:`Please come to city hall on ${s} for some required informations, Thank you!\n            <br>\n            <h5>Type :</h5> <p>${t.createNewBusinessPermitFormGroup.controls.type.value}</p>\n            <br>\n            <h5>Taxpayer/Registrant Fullname :</h5> <p>${t.createNewBusinessPermitFormGroup.controls.taxpayerfirstname.value} ${t.createNewBusinessPermitFormGroup.controls.taxpayermiddlename.value} ${t.createNewBusinessPermitFormGroup.controls.taxpayerlastname.value}</p>\n            <br>\n            <h5>Business Name :</h5> <p>${t.createNewBusinessPermitFormGroup.controls.taxpayerbusinessname.value}</p>\n            <br>\n            <h5>Trade Name / Franchise :</h5> <p>${t.createNewBusinessPermitFormGroup.controls.tradenamefranchise.value}</p>`};yield t.authService.sendGridEmail(p).subscribe(function(){var c=(0,u.Z)(function*(f){});return function(f){return c.apply(this,arguments)}}()),setTimeout(()=>{t.spinner.hide(),t.alertService.success("Business permit rescheduled successfully!"),t.realtime.next(t.getBusinessPermit()),t.rescheduleAppointment.hide()},1e3)}else t.alertService.danger(r.message)});return function(r){return o.apply(this,arguments)}}())}})()}printoutNewTab(){window.open(window.location.href.replace(this.router.url,"")+"/printout/"+this.applicantEmail+`_${this.businesspermitId}`,"_blank")}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(d.gz),e.Y36(q.u),e.Y36(n.qu),e.Y36(_.t2),e.Y36(h.c9),e.Y36(d.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-businesspermitbyid"]],decls:276,vars:22,consts:[[1,"navbar","navbar-top","navbar-expand","navbar-dashboard","navbar-dark","ps-0","pe-2","pb-0"],[1,"container-fluid","px-0",2,"margin","15px 40px 15px 40px"],["id","navbarSupportedContent",1,"d-flex","justify-content-between","w-100"],[1,"d-flex","align-items-center"],["id","navbar-search-main",1,"navbar-search","form-inline"],[1,"input-group","input-group-merge","search-bar"],["src","https://cdn-icons-png.flaticon.com/512/566/566002.png","routerLink","/businesspermit/list",2,"width","20px","height","20px","cursor","pointer"],["id","page-content-wrapper"],["type","pacman"],[1,"lds-circle"],[1,"loading"],["data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","id","exampleModal",1,"modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"mb-3"],["for","message-text",1,"col-form-label"],["type","email","name","email","required","","disabled","",1,"form-control",3,"value"],["name","Remarks","id","message-text","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-success",3,"click"],["data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","id","approvedApplication",1,"modal"],["name","Remarks","type","date","id","message-text","required","",1,"form-control",3,"ngModel","ngModelChange"],["data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","id","rescheduleAppointmentApplication",1,"modal"],["name","Remarks","type","date","id","message-text","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["type","submit",1,"btn","btn-success",3,"hidden","click"],[1,"container-fluid","p-1","bg-white"],["id","vax_easy_reg_form",1,"needs-validation",3,"formGroup"],[1,"card","content-container","m-4","p-5",2,"min-height","500px"],["id","top_label",1,"cc-title","fi-case-initial"],[1,"card-body",2,"margin-top","0rem","font-family","helvetica"],["id","allforms",1,"card",2,"border-radius","0px"],[1,"card-body","p-3"],[1,"col-lg-12","mt-4","mb-2"],[2,"font-weight","bold"],[1,"row"],[1,"col-lg-3"],[1,"form-group"],["for","str_fname"],["type","text","id","str_fname","readonly","","formControlName","type",1,"form-control",2,"text-transform","uppercase"],["for","str_mname"],[1,"text-danger"],["name","int_modeOfPayment","id","int_modeOfPayment","formControlName","modeofpayment",1,"form-select"],["disabled","","value","","selected","selected"],["disabled","","value","ANUALLY"],["disabled","","value","SEMI-ANUALLY"],["disabled","","value","QUARTERLY"],["for","str_lname"],["type","date","formControlName","dateofapplication","readonly","",1,"form-control"],["for","str_suffix"],["type","text","id","str_TinNo","formControlName","tinno","readonly","",1,"form-control",2,"text-transform","uppercase"],["for","str_bdate"],["type","text","formControlName","dtiseccdaregistrationnumber","readonly","",1,"form-control",2,"text-transform","uppercase"],["type","date","formControlName","dtiseccdaregistrationdate","readonly","",1,"form-control"],["name","int_modeOfPayment","formControlName","typeofbusiness",1,"form-select"],["disabled","","value","COOPERATIVE"],["disabled","","value","CORPORATION"],["disabled","","value","PARTNERSHIP"],["disabled","","value","SINGLE"],["formControlName","taxincentivegovernmententity","readonly","",1,"form-select"],["disabled","","value","YES"],["disabled","","value","NO"],[1,"col-lg-12"],["type","text","id","str_TinNo","formControlName","specifytheentity","readonly","",1,"form-control",2,"text-transform","uppercase"],[2,"font-weight","600"],[1,"col-lg-6"],["name","int_modeOfPayment","formControlName","from",1,"form-select"],["name","int_modeOfPayment","formControlName","to",1,"form-select"],[1,"col-md-3","mt-2"],["type","text","formControlName","taxpayerlastname","readonly","",1,"form-control"],[1,"col-xl-3","mt-2"],["type","text","formControlName","taxpayerfirstname","readonly","",1,"form-control"],["readonly","","type","text","formControlName","taxpayermiddlename",1,"form-control","regex_house_no"],[1,"ml-1"],["readonly","","type","text","formControlName","taxpayerbusinessname",1,"form-control","regex_house_no"],[1,"col-xl-12","mt-2"],["readonly","","type","text","id","txt_barangay","formControlName","tradenamefranchise",1,"form-control","regex_house_no"],["class","col-lg-12 mt-4 mb-2",4,"ngIf"],["class","row",4,"ngIf"],["class","row",4,"ngFor","ngForOf"],[1,"col-lg-8","mt-4","mb-2"],[2,"height","30%","width","70%",3,"src"],[2,"font-weight","800"],[1,"card-footer"],["class","col-lg-1",4,"ngIf"],["class","col-lg-4",4,"ngIf"],["readonly","","type","text","id","txt_barangay","formControlName","businessaddress",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","businesspostalcode",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","businessemailaddress",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","businesstelephone",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","businessmobile",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","ownersaddress",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","ownerspostalcode",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","ownersemailaddress",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","ownerstelephone",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","ownersmobile",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","incaseofemergencyperson",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","incaseofemergencypersontelephonenumber",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","incaseofemergencypersonemail",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","incaseofemergencypersonbusinessarea",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","grossreceipt",1,"form-control","regex_house_no"],[1,"col-xl-2","mt-2"],["readonly","","type","text","id","txt_barangay","formControlName","totalnumberofmale",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","totalnumberoffemale",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","numberofemployeeslgu",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","lessorsfullname",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","lessorsaddress",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","lessorstelorphone",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","lessorsemail",1,"form-control","regex_house_no"],["readonly","","type","text","id","txt_barangay","formControlName","monthlyrental",1,"form-control","regex_house_no"],[1,"col-md-4","mt-2"],[1,"text-danger","workinqc_fields"],["readonly","","type","text",1,"form-control",3,"value"],[1,"col-lg-1"],["type","button",1,"btn","btn-success","pl-5","pr-5","btn-block",3,"click"],[1,"col-lg-4"],["type","button",1,"btn","btn-warning","pl-5","pr-5","btn-block",3,"click"],["type","button",1,"btn","btn-danger","pl-5","pr-5","btn-block",3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"nav",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4)(5,"div",5),e._UZ(6,"img",6),e.qZA()()()()()(),e.TgZ(7,"div",7)(8,"ngx-spinner",8)(9,"div",9),e._UZ(10,"div"),e.qZA(),e.TgZ(11,"p",10),e._uU(12,"Submitting..."),e.qZA()(),e._UZ(13,"ngx-alerts"),e.TgZ(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14)(18,"h1",15),e._uU(19,"Send some remarks why you want to reject this application "),e.qZA(),e._UZ(20,"button",16),e.qZA(),e.TgZ(21,"form")(22,"div",17)(23,"div",18)(24,"label",19),e._uU(25,"Applicant Email:"),e.qZA(),e._UZ(26,"input",20),e.qZA(),e.TgZ(27,"div",18)(28,"label",19),e._uU(29,"Remarks:"),e.qZA(),e.TgZ(30,"textarea",21),e.NdJ("ngModelChange",function(o){return s.remarks=o}),e._uU(31,"\n                      "),e.qZA()()(),e.TgZ(32,"div",22)(33,"button",23),e.NdJ("click",function(){return s.rejectBusinessPermit()}),e._uU(34,"Submit"),e.qZA()()()()()(),e.TgZ(35,"div",24)(36,"div",12)(37,"div",13)(38,"div",14)(39,"h1",15),e._uU(40,"Fill up the date field to set an appointment "),e.qZA(),e._UZ(41,"button",16),e.qZA(),e.TgZ(42,"form")(43,"div",17)(44,"div",18)(45,"label",19),e._uU(46,"Applicant Email:"),e.qZA(),e._UZ(47,"input",20),e.qZA(),e.TgZ(48,"div",18)(49,"label",19),e._uU(50,"Date:"),e.qZA(),e.TgZ(51,"input",25),e.NdJ("ngModelChange",function(o){return s.dateAppointment=o}),e.qZA()()(),e.TgZ(52,"div",22)(53,"button",23),e.NdJ("click",function(){return s.approveBusinessPermit()}),e._uU(54,"Submit"),e.qZA()()()()()(),e.TgZ(55,"div",26)(56,"div",12)(57,"div",13)(58,"div",14)(59,"h1",15),e._uU(60,"Edit the application appointment "),e.qZA(),e._UZ(61,"button",16),e.qZA(),e.TgZ(62,"form")(63,"div",17)(64,"div",18)(65,"label",19),e._uU(66,"Applicant Email:"),e.qZA(),e._UZ(67,"input",20),e.qZA(),e.TgZ(68,"div",18)(69,"label",19),e._uU(70,"Date:"),e.qZA(),e.TgZ(71,"input",27),e.NdJ("ngModelChange",function(o){return s.AppointmentSchedule=o}),e.qZA()()(),e.TgZ(72,"div",22)(73,"button",28),e.NdJ("click",function(){return s.editScheduleAppointment()}),e._uU(74,"Save Change"),e.qZA()()()()()(),e.TgZ(75,"div",29)(76,"form",30)(77,"div",31)(78,"h4",32)(79,"strong"),e._uU(80),e.qZA()(),e.TgZ(81,"h4",32)(82,"strong"),e._uU(83),e.qZA()(),e.TgZ(84,"div",33)(85,"div",34)(86,"div",35)(87,"div",36)(88,"h4",37),e._uU(89,"1. Basic Information"),e.qZA()(),e.TgZ(90,"div",38)(91,"div",39)(92,"div",40)(93,"label",41),e._uU(94," Type "),e.qZA(),e._UZ(95,"input",42),e.qZA()(),e.TgZ(96,"div",39)(97,"div",40)(98,"label",43)(99,"span",44),e._uU(100,"*"),e.qZA(),e._uU(101," Mode Of Payment "),e.qZA(),e.TgZ(102,"select",45)(103,"option",46),e._uU(104,"SELECT MODE OF PAYMENT"),e.qZA(),e.TgZ(105,"option",47),e._uU(106,"ANUALLY"),e.qZA(),e.TgZ(107,"option",48),e._uU(108,"SEMI-ANUALLY"),e.qZA(),e.TgZ(109,"option",49),e._uU(110,"QUARTERLY"),e.qZA()()()(),e.TgZ(111,"div",39)(112,"div",40)(113,"label",50)(114,"span",44),e._uU(115,"*"),e.qZA(),e._uU(116," Date of Application "),e.qZA(),e._UZ(117,"input",51),e.qZA()(),e.TgZ(118,"div",39)(119,"div",40)(120,"label",52)(121,"span",44),e._uU(122,"*"),e.qZA(),e._uU(123," Tin No. "),e.qZA(),e._UZ(124,"input",53)(125,"br"),e.qZA()(),e.TgZ(126,"div",39)(127,"div",40)(128,"label",54)(129,"span",44),e._uU(130,"*"),e.qZA(),e._uU(131," DTI/SEC/CDA Registration No. "),e.qZA(),e._UZ(132,"input",55),e.qZA()(),e.TgZ(133,"div",39)(134,"div",40)(135,"label",54)(136,"span",44),e._uU(137,"*"),e.qZA(),e._uU(138," DTI/SEC/CDA Registration Date "),e.qZA(),e._UZ(139,"input",56),e.qZA()(),e.TgZ(140,"div",39)(141,"div",40)(142,"label",43)(143,"span",44),e._uU(144,"*"),e.qZA(),e._uU(145," Type Of Business "),e.qZA(),e.TgZ(146,"select",57)(147,"option",46),e._uU(148,"SELECT TYPE OF BUSINESS"),e.qZA(),e.TgZ(149,"option",58),e._uU(150,"COOPERATIVE"),e.qZA(),e.TgZ(151,"option",59),e._uU(152,"CORPORATION"),e.qZA(),e.TgZ(153,"option",60),e._uU(154,"PARTNERSHIP"),e.qZA(),e.TgZ(155,"option",61),e._uU(156,"SINGLE"),e.qZA()()()(),e.TgZ(157,"div",39)(158,"div",40)(159,"label",43)(160,"span",44),e._uU(161,"*"),e.qZA(),e._uU(162," Are you enjoying tax incentive from any Government Entity? "),e.qZA(),e.TgZ(163,"select",62)(164,"option",46),e._uU(165,"SELECT"),e.qZA(),e.TgZ(166,"option",63),e._uU(167,"YES"),e.qZA(),e.TgZ(168,"option",64),e._uU(169,"NO"),e.qZA()()()(),e.TgZ(170,"div",65)(171,"div",40)(172,"label",52)(173,"span",44),e._uU(174,"*"),e.qZA(),e._uU(175," Please Specify The Entity "),e.qZA(),e.TgZ(176,"textarea",66),e._uU(177,"                                        "),e.qZA()()(),e.TgZ(178,"div",36)(179,"h6",67),e._uU(180,"AMENDMENT"),e.qZA()(),e.TgZ(181,"div",68)(182,"div",40)(183,"label",43),e._uU(184," From "),e.qZA(),e.TgZ(185,"select",69)(186,"option",46),e._uU(187,"PLEASE SELECT"),e.qZA(),e.TgZ(188,"option",59),e._uU(189,"CORPORATION"),e.qZA(),e.TgZ(190,"option",60),e._uU(191,"PARTNERSHIP"),e.qZA(),e.TgZ(192,"option",61),e._uU(193,"SINGLE"),e.qZA()()()(),e.TgZ(194,"div",68)(195,"div",40)(196,"label",43),e._uU(197," To "),e.qZA(),e.TgZ(198,"select",70)(199,"option",46),e._uU(200,"PLEASE SELECT"),e.qZA(),e.TgZ(201,"option",59),e._uU(202,"CORPORATION"),e.qZA(),e.TgZ(203,"option",60),e._uU(204,"PARTNERSHIP"),e.qZA(),e.TgZ(205,"option",61),e._uU(206,"SINGLE"),e.qZA()()()(),e.TgZ(207,"div",36)(208,"h6",67),e._uU(209,"NAME OF TAXPAYER/REGISTRANT"),e.qZA()(),e.TgZ(210,"div",71)(211,"h6")(212,"span",44)(213,"strong"),e._uU(214,"*"),e.qZA()(),e._uU(215," Last Name : "),e.qZA(),e._UZ(216,"input",72),e.qZA(),e.TgZ(217,"div",73)(218,"h6")(219,"span",44)(220,"strong"),e._uU(221,"*"),e.qZA()(),e._uU(222," First Name :"),e.qZA(),e._UZ(223,"input",74),e.qZA(),e.TgZ(224,"div",73)(225,"h6")(226,"span",44)(227,"strong"),e._uU(228,"*"),e.qZA()(),e._uU(229," Middle Name :"),e.qZA(),e._UZ(230,"input",75),e.qZA(),e.TgZ(231,"div",73)(232,"h6",76)(233,"span",44)(234,"strong"),e._uU(235,"*"),e.qZA()(),e._uU(236," Business Name : "),e.qZA(),e._UZ(237,"input",77),e.qZA(),e.TgZ(238,"div",78)(239,"h6")(240,"span",44)(241,"strong"),e._uU(242,"*"),e.qZA()(),e._uU(243," Trade Name / Franchise : "),e.qZA(),e._UZ(244,"input",79),e.qZA(),e.YNc(245,U,3,0,"div",80),e.YNc(246,N,166,0,"div",81),e.TgZ(247,"div",36)(248,"h4",37),e._uU(249,"3. Business Activity"),e.qZA()(),e.YNc(250,T,43,5,"div",82),e.TgZ(251,"div",36)(252,"p",37)(253,"span",44),e._uU(254,"*"),e.qZA(),e._uU(255," I DECLARE UNDER PENALTY OF PERJURY that foregoing information are true base on my perosnal knowledge and authentic records. Further, I agree to comply with the regulatory requirements and other deficiencies within 30 days from release of the business permit. "),e.qZA()(),e.TgZ(256,"div",83),e._UZ(257,"br"),e.TgZ(258,"h6",37)(259,"span",44),e._uU(260,"*"),e.qZA(),e._uU(261,"SIGNATURE OF APPLICANT"),e.qZA(),e._UZ(262,"img",84),e.qZA(),e.TgZ(263,"div",36)(264,"span",85),e._uU(265),e.qZA(),e._UZ(266,"br")(267,"br"),e.TgZ(268,"h6",37),e._uU(269,"TAXPAYER OVER PRINTED NAME"),e.qZA()()(),e.TgZ(270,"div",86)(271,"div",38),e.YNc(272,x,3,0,"div",87),e.YNc(273,B,3,0,"div",88),e.YNc(274,P,3,0,"div",87),e.YNc(275,w,3,0,"div",88),e.qZA()()()()()()()()()),2&t&&(e.xp6(26),e.s9C("value",s.applicantEmail),e.xp6(4),e.Q6J("ngModel",s.remarks),e.xp6(17),e.s9C("value",s.applicantEmail),e.xp6(4),e.Q6J("ngModel",s.dateAppointment),e.xp6(16),e.s9C("value",s.applicantEmail),e.xp6(4),e.Q6J("disabled","NONE"!=s.DateApproved)("ngModel",s.AppointmentSchedule),e.xp6(2),e.Q6J("hidden","NONE"!=s.DateApproved),e.xp6(3),e.Q6J("formGroup",s.createNewBusinessPermitFormGroup),e.xp6(4),e.hij("Applicant : ",s.applicantFullname,""),e.xp6(3),e.hij("Status : ",s.status,""),e.xp6(162),e.Q6J("ngIf","Renew"==s.createNewBusinessPermitFormGroup.controls.type.value),e.xp6(1),e.Q6J("ngIf","Renew"==s.createNewBusinessPermitFormGroup.controls.type.value),e.xp6(4),e.Q6J("ngForOf",s.lineofbusiness),e.xp6(12),e.s9C("src",s.createNewBusinessPermitFormGroup.controls.signatureofapplicant.value,e.LSH),e.xp6(3),e.lnq("",s.createNewBusinessPermitFormGroup.controls.taxpayerfirstname.value," ",s.createNewBusinessPermitFormGroup.controls.taxpayermiddlename.value," ",s.createNewBusinessPermitFormGroup.controls.taxpayerlastname.value,""),e.xp6(7),e.Q6J("ngIf","Approved"==s.status),e.xp6(1),e.Q6J("ngIf","Approved"==s.status),e.xp6(1),e.Q6J("ngIf","Pending"==s.status),e.xp6(1),e.Q6J("ngIf","Pending"==s.status))},dependencies:[Z.sg,Z.O5,d.rH,n._Y,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.JL,n.Q7,n.sg,n.u,n.On,n.F,_.Ro,h.Jj],styles:[".lds-circle[_ngcontent-%COMP%]{display:inline-block;transform:translateZ(1px)}.lds-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;width:64px;height:64px;margin:8px;border-radius:50%;background:#fff;animation:lds-circle 2.4s cubic-bezier(0,.2,.8,1) infinite}@keyframes lds-circle{0%,to{animation-timing-function:cubic-bezier(.5,0,1,.5)}0%{transform:rotateY(0)}50%{transform:rotateY(1800deg);animation-timing-function:cubic-bezier(0,.5,.5,1)}to{transform:rotateY(3600deg)}}"]}),a})()}];let C=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[d.Bz.forChild(I),d.Bz]}),a})(),F=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[Z.ez,C,n.UX,n.u5,_.ef,h.nM.forRoot({timeout:5e3,positionX:"right",positionY:"top"})]}),a})()}}]);