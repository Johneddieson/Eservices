"use strict";(self.webpackChunkeservices=self.webpackChunkeservices||[]).push([[630],{9630:(x,h,d)=>{d.r(h),d.d(h,{ChangepasswordModule:()=>P});var w=d(6895),l=d(4629),p=d(5861),n=d(433),e=d(4650),m=d(3388),c=d(8423);function g(a,t){1&a&&(e.TgZ(0,"p",40),e._uU(1,"A lowercase,"),e.qZA())}function f(a,t){1&a&&(e.TgZ(0,"p",40),e._uU(1,"A uppercase,"),e.qZA())}function C(a,t){1&a&&(e.TgZ(0,"p",40),e._uU(1,"A number,"),e.qZA())}function v(a,t){1&a&&(e.TgZ(0,"p",40),e._uU(1,"Minimum 8 characters"),e.qZA())}function b(a,t){1&a&&(e.TgZ(0,"p",40),e._uU(1,"A lowercase,"),e.qZA())}function _(a,t){1&a&&(e.TgZ(0,"p",40),e._uU(1,"A uppercase,"),e.qZA())}function y(a,t){1&a&&(e.TgZ(0,"p",40),e._uU(1,"A number,"),e.qZA())}function Z(a,t){1&a&&(e.TgZ(0,"p",40),e._uU(1,"Minimum 8 characters"),e.qZA())}function T(a,t){1&a&&(e.TgZ(0,"p",40),e._uU(1,"Not matched"),e.qZA())}const M=[{path:"",component:(()=>{class a{constructor(s,r,o,i){this.formBuilder=s,this.authService=r,this.spinner=o,this.router=i,this.confirmshowPassword="fa fa-eye",this.confirmpasswordType="password",this.oldshowPassword="fa fa-eye",this.oldpasswordType="password",this.newshowPassword="fa fa-eye",this.newpasswordType="password",this.errMsg="",this.oldpassworderrMsg="",this.newpassworderrMsg="",this.validationMessageObject={},this.isValid=!1,this.incorrectOldPasswordMessage="",this.userEmail="",this.oldpasswordthereisnumber=!1,this.oldpasswordthereIsLowerCaseCharacters=!1,this.oldpasswordthereIsUpperCaseCharacters=!1,this.oldpasswordminimum8Characters=!1,this.newpasswordthereisnumber=!1,this.newpasswordthereIsLowerCaseCharacters=!1,this.newpasswordthereIsUpperCaseCharacters=!1,this.newpasswordminimum8Characters=!1,this.newpasswordAndconfirmpasswordIsMatched=!0,this.changepasswordFormGroup=this.formBuilder.group({oldpassword:["",[n.kI.required,n.kI.pattern(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/),this.oldpasswordaNumberPatternValid({pattern:/^([^0-9]*)$/,msg:"A number"}),this.oldpasswordaLowerCasePatternValid({pattern:/^([^a-z]*)$/,msg:"A lowercase"}),this.oldpasswordaUpperCasePatternValid({pattern:/^([^A-Z]*)$/,msg:"A uppercase"})]],newpassword:["",[n.kI.required,n.kI.pattern(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/),this.newpasswordaNumberPatternValid({pattern:/^([^0-9]*)$/,msg:"A number"}),this.newpasswordaLowerCasePatternValid({pattern:/^([^a-z]*)$/,msg:"A lowercase"}),this.newpasswordaUpperCasePatternValid({pattern:/^([^A-Z]*)$/,msg:"A uppercase"})]],confirmpassword:[""]})}ngOnInit(){this.formModal=new window.bootstrap.Modal(document.getElementById("exampleModal")),this.modalIncorrectOldPassword=new window.bootstrap.Modal(document.getElementById("apiErrorModal")),this.modalUpdatedPassworSuccessfully=new window.bootstrap.Modal(document.getElementById("apiSuccessModal"));const s=JSON.parse(localStorage.getItem("user"));this.getuserById(s.id)}oldpasswordaNumberPatternValid(s){return r=>{this.oldpasswordthereisnumber=!(!r.value||r.value.match(s.pattern))}}oldpasswordaLowerCasePatternValid(s){return r=>{this.oldpasswordthereIsLowerCaseCharacters=!(!r.value||r.value.match(s.pattern))}}oldpasswordaUpperCasePatternValid(s){return r=>{this.oldpasswordthereIsUpperCaseCharacters=!(!r.value||r.value.match(s.pattern))}}oldpasswordaMinimum8CharactersPatternValid(s){this.oldpasswordminimum8Characters=s.target.value.length>=8}oldpasswordShowHide(){var s=this;return(0,p.Z)(function*(){s.oldpasswordType="password"==(yield s.oldpasswordType)?"text":"password",s.oldshowPassword="password"==(yield s.oldpasswordType)?"fa fa-eye":"fa fa-eye-slash"})()}confirmpasswordShowHide(){var s=this;return(0,p.Z)(function*(){s.confirmpasswordType="password"==(yield s.confirmpasswordType)?"text":"password",s.confirmshowPassword="password"==(yield s.confirmpasswordType)?"fa fa-eye":"fa fa-eye-slash"})()}newpasswordShowHide(){var s=this;return(0,p.Z)(function*(){s.newpasswordType="password"==(yield s.newpasswordType)?"text":"password",s.newshowPassword="password"==(yield s.newpasswordType)?"fa fa-eye":"fa fa-eye-slash"})()}newpasswordaNumberPatternValid(s){return r=>{this.newpasswordthereisnumber=!(!r.value||r.value.match(s.pattern))}}newpasswordaLowerCasePatternValid(s){return r=>{this.newpasswordthereIsLowerCaseCharacters=!(!r.value||r.value.match(s.pattern))}}newpasswordaUpperCasePatternValid(s){return r=>{this.newpasswordthereIsUpperCaseCharacters=!(!r.value||r.value.match(s.pattern))}}newpasswordaMinimum8CharactersPatternValid(s){this.newpasswordminimum8Characters=s.target.value.length>=8}newpasswordAndconfirmpasswordIsMatchedEvent(s){var r=this;return(0,p.Z)(function*(){r.newpasswordAndconfirmpasswordIsMatched=r.changepasswordFormGroup.controls.newpassword.value===s.target.value})()}validation(){var s=this.changepasswordFormGroup.controls.oldpassword.invalid,r=this.changepasswordFormGroup.controls.newpassword.invalid,o=this.changepasswordFormGroup.controls.newpassword.value!==this.changepasswordFormGroup.controls.confirmpassword.value;return 1==s||1==r||1==o?(this.errMsg="",this.oldpassworderrMsg="",this.newpassworderrMsg="",this.isValid=!1,this.oldpassworderrMsg+=!0===s?"\u2022 Old password must be in the correct format\n":"",this.newpassworderrMsg+=!0===r?"\u2022 New password must be in the correct format\n":"",this.errMsg+=!0===o?"\u2022 Confirm password does not matched into your new password\n":""):(this.isValid=!0,this.errMsg=""),this.validationMessageObject={isValid:this.isValid,errMessage:this.errMsg},this.validationMessageObject}updatePassword(){var s=this;return(0,p.Z)(function*(){0==Object.assign(s.validation()).isValid?yield s.formModal.show():s.updatePasswordApi()})()}getuserById(s){var r=this;return(0,p.Z)(function*(){var o={id:s};yield r.authService.getUsersById(o).subscribe(i=>{r.userEmail=i.data[0].email})})()}updatePasswordApi(){var s=this;return(0,p.Z)(function*(){var o={id:JSON.parse(localStorage.getItem("user")).id,oldpassword:s.changepasswordFormGroup.controls.oldpassword.value,newpassword:s.changepasswordFormGroup.controls.newpassword.value};yield s.authService.changeUserPassword(o).subscribe(function(){var i=(0,p.Z)(function*(u){1==u.success?(s.incorrectOldPasswordMessage="",yield s.modalUpdatedPassworSuccessfully.show(),s.incorrectOldPasswordMessage=u.message):(s.incorrectOldPasswordMessage="",yield s.modalIncorrectOldPassword.show(),s.incorrectOldPasswordMessage=u.message)});return function(u){return i.apply(this,arguments)}}())})()}closeModal(){var s=this;return(0,p.Z)(function*(){yield s.modalUpdatedPassworSuccessfully.hide(),s.spinner.show().then(()=>{}),setTimeout(()=>{s.spinner.hide(),localStorage.removeItem("user"),s.router.navigateByUrl("/")},4e3)})()}}return a.\u0275fac=function(s){return new(s||a)(e.Y36(n.qu),e.Y36(m.u),e.Y36(c.t2),e.Y36(l.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-changepassword"]],decls:108,vars:22,consts:[[1,"navbar","navbar-top","navbar-expand","navbar-dashboard","navbar-dark","ps-0","pe-2","pb-0"],[1,"container-fluid","px-0",2,"margin","15px 40px 15px 40px"],["id","navbarSupportedContent",1,"d-flex","justify-content-between","w-100"],[1,"d-flex","align-items-center"],["id","navbar-search-main",1,"navbar-search","form-inline"],[1,"input-group","input-group-merge","search-bar"],["src","https://cdn-icons-png.flaticon.com/512/566/566002.png","routerLink","/adminhome",2,"width","20px","height","20px","cursor","pointer"],["type","pacman"],[1,"lds-ripple"],[1,"loading"],["data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","id","exampleModal",1,"modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],[1,"modal-body"],[1,"modal-footer"],["type","submit","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-danger"],["data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","id","apiErrorModal",1,"modal"],["data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","id","apiSuccessModal",1,"modal"],["type","submit",1,"btn","btn-success",3,"click"],[1,"mainDiv"],[1,"cardStyle"],[3,"formGroup"],[1,"formTitle"],[1,"inputDiv"],["for","password",1,"inputLabel"],[1,"input-group","mb-3"],[1,"input-group-text"],[1,"fa","fa-envelope"],["id","password","type","email","disabled","",1,"form-control",3,"value"],[1,"fa","fa-lock"],["id","password","name","password","placeholder","Old Password","formControlName","oldpassword",1,"form-control",3,"type","paste","keyup"],[1,"input-group-text",3,"click"],["id","togglePassword",2,"cursor","pointer",3,"ngClass"],["style","color: red;",4,"ngIf"],["id","password","name","password","placeholder","New Password","formControlName","newpassword",1,"form-control",3,"type","paste","keyup"],["id","password","name","password","placeholder","Confirm Password","formControlName","confirmpassword",1,"form-control",3,"type","paste","keyup"],[1,"buttonWrapper"],["type","submit","id","submitButton",1,"submitButton","pure-button","pure-button-primary",3,"click"],[2,"color","red"]],template:function(s,r){1&s&&(e.TgZ(0,"nav",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4)(5,"div",5),e._UZ(6,"img",6),e.qZA()()()()()(),e.TgZ(7,"ngx-spinner",7)(8,"div",8),e._UZ(9,"div")(10,"div"),e.qZA(),e.TgZ(11,"p",9),e._uU(12,"Logging out..."),e.qZA()(),e.TgZ(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13)(17,"h1",14),e._uU(18,"Error "),e.qZA()(),e.TgZ(19,"form")(20,"div",15)(21,"p"),e._uU(22),e.qZA(),e.TgZ(23,"p"),e._uU(24),e.qZA(),e.TgZ(25,"p"),e._uU(26),e.qZA()(),e.TgZ(27,"div",16)(28,"button",17),e._uU(29,"Close"),e.qZA()()()()()(),e.TgZ(30,"div",18)(31,"div",11)(32,"div",12)(33,"div",13)(34,"h1",14),e._uU(35,"Error "),e.qZA()(),e.TgZ(36,"form")(37,"div",15)(38,"p"),e._uU(39),e.qZA()(),e.TgZ(40,"div",16)(41,"button",17),e._uU(42,"Close"),e.qZA()()()()()(),e.TgZ(43,"div",19)(44,"div",11)(45,"div",12)(46,"div",13)(47,"h1",14),e._uU(48,"Success "),e.qZA()(),e.TgZ(49,"form")(50,"div",15)(51,"p"),e._uU(52),e.qZA()(),e.TgZ(53,"div",16)(54,"button",20),e.NdJ("click",function(){return r.closeModal()}),e._uU(55,"Close"),e.qZA()()()()()(),e.TgZ(56,"div",21)(57,"div",22)(58,"form",23)(59,"h2",24),e._uU(60," Change your password "),e.qZA(),e.TgZ(61,"div",25)(62,"label",26),e._uU(63,"Email"),e.qZA(),e.TgZ(64,"div",27)(65,"span",28),e._UZ(66,"i",29),e.qZA(),e._UZ(67,"input",30),e.qZA()(),e.TgZ(68,"div",25)(69,"label",26),e._uU(70,"Old Password"),e.qZA(),e.TgZ(71,"div",27)(72,"span",28),e._UZ(73,"i",31),e.qZA(),e.TgZ(74,"input",32),e.NdJ("paste",function(){return!1})("keyup",function(i){return r.oldpasswordaMinimum8CharactersPatternValid(i)}),e.qZA(),e.TgZ(75,"span",33),e.NdJ("click",function(){return r.oldpasswordShowHide()}),e._UZ(76,"i",34),e.qZA()(),e.YNc(77,g,2,0,"p",35),e.YNc(78,f,2,0,"p",35),e.YNc(79,C,2,0,"p",35),e.YNc(80,v,2,0,"p",35),e.qZA(),e.TgZ(81,"div",25)(82,"label",26),e._uU(83,"New Password"),e.qZA(),e.TgZ(84,"div",27)(85,"span",28),e._UZ(86,"i",31),e.qZA(),e.TgZ(87,"input",36),e.NdJ("paste",function(){return!1})("keyup",function(i){return r.newpasswordaMinimum8CharactersPatternValid(i)}),e.qZA(),e.TgZ(88,"span",33),e.NdJ("click",function(){return r.newpasswordShowHide()}),e._UZ(89,"i",34),e.qZA()(),e.YNc(90,b,2,0,"p",35),e.YNc(91,_,2,0,"p",35),e.YNc(92,y,2,0,"p",35),e.YNc(93,Z,2,0,"p",35),e.qZA(),e.TgZ(94,"div",25)(95,"label",26),e._uU(96,"Confirm Password"),e.qZA(),e.TgZ(97,"div",27)(98,"span",28),e._UZ(99,"i",31),e.qZA(),e.TgZ(100,"input",37),e.NdJ("paste",function(){return!1})("keyup",function(i){return r.newpasswordAndconfirmpasswordIsMatchedEvent(i)}),e.qZA(),e.TgZ(101,"span",33),e.NdJ("click",function(){return r.confirmpasswordShowHide()}),e._UZ(102,"i",34),e.qZA()(),e.YNc(103,T,2,0,"p",35),e.qZA(),e.TgZ(104,"div",38)(105,"button",39),e.NdJ("click",function(){return r.updatePassword()}),e.TgZ(106,"span"),e._uU(107,"Update"),e.qZA()()()()()()),2&s&&(e.xp6(22),e.Oqu(r.oldpassworderrMsg),e.xp6(2),e.Oqu(r.newpassworderrMsg),e.xp6(2),e.Oqu(r.errMsg),e.xp6(13),e.Oqu(r.incorrectOldPasswordMessage),e.xp6(13),e.Oqu(r.incorrectOldPasswordMessage),e.xp6(6),e.Q6J("formGroup",r.changepasswordFormGroup),e.xp6(9),e.s9C("value",r.userEmail),e.xp6(7),e.Q6J("type",r.oldpasswordType),e.xp6(2),e.Q6J("ngClass",r.oldshowPassword),e.xp6(1),e.Q6J("ngIf",!r.oldpasswordthereIsLowerCaseCharacters),e.xp6(1),e.Q6J("ngIf",!r.oldpasswordthereIsUpperCaseCharacters),e.xp6(1),e.Q6J("ngIf",!r.oldpasswordthereisnumber),e.xp6(1),e.Q6J("ngIf",!r.oldpasswordminimum8Characters),e.xp6(7),e.Q6J("type",r.newpasswordType),e.xp6(2),e.Q6J("ngClass",r.newshowPassword),e.xp6(1),e.Q6J("ngIf",!r.newpasswordthereIsLowerCaseCharacters),e.xp6(1),e.Q6J("ngIf",!r.newpasswordthereIsUpperCaseCharacters),e.xp6(1),e.Q6J("ngIf",!r.newpasswordthereisnumber),e.xp6(1),e.Q6J("ngIf",!r.newpasswordminimum8Characters),e.xp6(7),e.Q6J("type",r.confirmpasswordType),e.xp6(2),e.Q6J("ngClass",r.confirmshowPassword),e.xp6(1),e.Q6J("ngIf",!r.newpasswordAndconfirmpasswordIsMatched))},dependencies:[w.mk,w.O5,l.rH,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,n.F,c.Ro],styles:['@import"https://fonts.googleapis.com/css?family=Roboto:400,400i,700";@import"https://use.fontawesome.com/releases/v5.8.1/css/all.css";.mainDiv[_ngcontent-%COMP%]{display:flex;min-height:100%;align-items:center;justify-content:center;background-color:#f9f9f9;font-family:Open Sans,sans-serif}.cardStyle[_ngcontent-%COMP%]{width:500px;border-color:#fff;background:#fff;padding:36px 0;border-radius:4px;margin:30px 0;box-shadow:0 0 2px #00000040}.formTitle[_ngcontent-%COMP%]{font-weight:600;margin-top:20px;color:#2f2d3b;text-align:center}.inputLabel[_ngcontent-%COMP%]{font-size:12px;color:#555;margin-bottom:6px;margin-top:24px}.inputDiv[_ngcontent-%COMP%]{width:70%;display:flex;flex-direction:column;margin:auto}input[_ngcontent-%COMP%]{height:40px;font-size:16px;border-radius:4px;border:none;border:solid 1px #ccc;padding:0 11px}input[_ngcontent-%COMP%]:disabled{cursor:not-allowed;border:solid 1px #eee}.buttonWrapper[_ngcontent-%COMP%]{margin-top:40px}.submitButton[_ngcontent-%COMP%]{width:70%;height:40px;margin:auto;display:block;color:#fff;background-color:#065492;border-color:#065492;text-shadow:0 -1px 0 rgba(0,0,0,.12);box-shadow:0 2px #00000009;border-radius:4px;font-size:14px;cursor:pointer}.submitButton[_ngcontent-%COMP%]:disabled, button[disabled][_ngcontent-%COMP%]{border:1px solid #cccccc;background-color:#ccc;color:#666}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:after, *[_ngcontent-%COMP%]:before{box-sizing:border-box}body[_ngcontent-%COMP%]{width:100%;height:100%;font-family:Roboto;padding:0;margin:0;font-size:16px;overflow:hidden}.lds-ripple[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.lds-ripple[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;border:4px solid #fff;opacity:1;border-radius:50%;animation:lds-ripple 1s cubic-bezier(0,.2,.8,1) infinite}.lds-ripple[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.5s}@keyframes lds-ripple{0%{top:36px;left:36px;width:0;height:0;opacity:0}4.9%{top:36px;left:36px;width:0;height:0;opacity:0}5%{top:36px;left:36px;width:0;height:0;opacity:1}to{top:0;left:0;width:72px;height:72px;opacity:0}}']}),a})()}];let A=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[l.Bz.forChild(M),l.Bz]}),a})(),P=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[w.ez,A,n.UX,n.u5,c.ef]}),a})()}}]);